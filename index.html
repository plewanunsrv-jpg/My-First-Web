<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting & Task Dashboard</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Load Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Sarabun', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- Icons (Inline SVG for standalone usage) ---
        const Icon = ({ name, className }) => {
            const icons = {
                Plus: <path d="M12 5v14M5 12h14" />,
                Clock: <path d="M12 6v6l4 2" />, // Circle part handled by container usually, but basic path here
                AlertTriangle: <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0zM12 9v4M12 17h.01" />,
                AlertCircle: <path d="M12 8v4M12 16h.01" />, // Circle handled by wrapper usually
                Search: <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />,
                Filter: <path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z" />,
                Inbox: <path d="M22 12h-6l-2 3h-4l-2-3H2" />,
                X: <path d="M18 6L6 18M6 6l12 12" />,
                Calendar: <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />,
                User: <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />,
                Tag: <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" />,
                FileText: <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />,
                CheckCircle: <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />,
                Check: <path d="M20 6L9 17l-5-5" />,
                Package: <path d="M16.5 9.4L7.5 4.21" />,
                Trash2: <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />,
                ListPlus: <path d="M11 12H3M16 6H3M16 18H3M18 9v6M21 12h-6" />,
                CalendarDays: <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
            };
            
            // Adjust specific SVG wrappers if needed, simplified for generic use
            return (
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="24" height="24" viewBox="0 0 24 24" 
                    fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"
                    className={className}
                >
                    {icons[name]}
                    {/* Extra paths for composite icons */}
                    {name === 'Clock' && <circle cx="12" cy="12" r="10" />}
                    {name === 'AlertCircle' && <circle cx="12" cy="12" r="10" />}
                    {name === 'Calendar' && <line x1="16" y1="2" x2="16" y2="6" />}
                    {name === 'Calendar' && <line x1="8" y1="2" x2="8" y2="6" />}
                    {name === 'Calendar' && <line x1="3" y1="10" x2="21" y2="10" />}
                    {name === 'CalendarDays' && <line x1="16" y1="2" x2="16" y2="6" />}
                    {name === 'CalendarDays' && <line x1="8" y1="2" x2="8" y2="6" />}
                    {name === 'CalendarDays' && <line x1="3" y1="10" x2="21" y2="10" />}
                    {name === 'CalendarDays' && <path d="M8 14h.01" />}
                    {name === 'CalendarDays' && <path d="M12 14h.01" />}
                    {name === 'CalendarDays' && <path d="M16 14h.01" />}
                    {name === 'CalendarDays' && <path d="M8 18h.01" />}
                    {name === 'CalendarDays' && <path d="M12 18h.01" />}
                    {name === 'CalendarDays' && <path d="M16 18h.01" />}
                    {name === 'User' && <circle cx="12" cy="7" r="4" />}
                    {name === 'Tag' && <line x1="7" y1="7" x2="7.01" y2="7" />}
                    {name === 'FileText' && <polyline points="14 2 14 8 20 8" />}
                    {name === 'FileText' && <line x1="16" y1="13" x2="8" y2="13" />}
                    {name === 'FileText' && <line x1="16" y1="17" x2="8" y2="17" />}
                    {name === 'FileText' && <polyline points="10 9 9 9 8 9" />}
                    {name === 'CheckCircle' && <polyline points="22 4 12 14.01 9 11.01" />}
                    {name === 'Package' && <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />}
                    {name === 'Package' && <polyline points="3.27 6.96 12 12.01 20.73 6.96" />}
                    {name === 'Package' && <line x1="12" y1="22.08" x2="12" y2="12" />}
                    {name === 'Inbox' && <path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z" />}
                </svg>
            );
        };

        // --- Components ---

        const StatCard = ({ title, count, type, iconName }) => {
            const styles = {
                default: { bg: 'bg-white', border: 'border-gray-200', text: 'text-gray-900', iconColor: 'text-gray-400' },
                blue: { bg: 'bg-blue-50', border: 'border-blue-100', text: 'text-blue-600', iconColor: 'text-blue-500' },
                yellow: { bg: 'bg-yellow-50', border: 'border-yellow-100', text: 'text-yellow-700', iconColor: 'text-yellow-600' },
                red: { bg: 'bg-red-50', border: 'border-red-100', text: 'text-red-600', iconColor: 'text-red-500' },
                green: { bg: 'bg-green-50', border: 'border-green-100', text: 'text-green-600', iconColor: 'text-green-500' },
            };

            const style = styles[type] || styles.default;

            return (
                <div className={`${style.bg} border ${style.border} rounded-xl p-4 flex flex-col justify-between h-32 shadow-sm transition-all hover:shadow-md`}>
                    <div className="flex justify-between items-start">
                        <span className={`text-sm font-medium ${type === 'default' ? 'text-gray-500' : style.text}`}>
                            {title}
                        </span>
                        {iconName && <Icon name={iconName} className={`w-5 h-5 ${style.iconColor}`} />}
                    </div>
                    <div className={`text-4xl font-bold ${style.text}`}>
                        {count}
                    </div>
                </div>
            );
        };

        const Modal = ({ isOpen, onClose, onSubmit }) => {
            const [topic, setTopic] = useState('');
            const [meetingDate, setMeetingDate] = useState(new Date().toISOString().split('T')[0]);
            const [pendingItems, setPendingItems] = useState([]);
            const [currentItem, setCurrentItem] = useState({
                partNo: '',
                partName: '',
                assignee: '',
                startDate: '',
                dueDate: '',
                details: ''
            });

            if (!isOpen) return null;

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setCurrentItem(prev => ({ ...prev, [name]: value }));
            };

            const handleAddItem = () => {
                if (!currentItem.assignee || !currentItem.startDate || !currentItem.dueDate) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                    return;
                }

                setPendingItems(prev => [...prev, { ...currentItem, tempId: Date.now() }]);
                setCurrentItem({
                    partNo: '',
                    partName: '',
                    assignee: '',
                    startDate: currentItem.startDate, 
                    dueDate: currentItem.dueDate,
                    details: ''
                });
            };

            const handleRemoveItem = (tempId) => {
                setPendingItems(prev => prev.filter(item => item.tempId !== tempId));
            };

            const handleSubmitAll = () => {
                if (!topic) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°');
                    return;
                }
                if (!meetingDate) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°');
                    return;
                }

                let finalItems = [...pendingItems];

                if (currentItem.assignee && currentItem.startDate && currentItem.dueDate) {
                    finalItems.push({ ...currentItem, tempId: Date.now() });
                }

                if (finalItems.length === 0) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');
                    return;
                }

                const tasks = finalItems.map((item, index) => ({
                    id: Date.now() + index + Math.random(),
                    topic: topic,
                    meetingDate: meetingDate,
                    ...item,
                    status: 'active',
                    completedAt: null,
                    createdAt: new Date().toISOString()
                }));

                onSubmit(tasks);
                setTopic('');
                setMeetingDate(new Date().toISOString().split('T')[0]);
                setPendingItems([]);
                setCurrentItem({ partNo: '', partName: '', assignee: '', startDate: '', dueDate: '', details: '' });
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl w-full max-w-4xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                        <div className="bg-blue-600 px-6 py-4 flex justify-between items-center flex-shrink-0">
                            <h3 className="text-white font-semibold text-lg flex items-center gap-2">
                                <Icon name="Plus" className="w-5 h-5" /> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏° (Multiple Items)
                            </h3>
                            <button onClick={onClose} className="text-blue-100 hover:text-white transition-colors">
                                <Icon name="X" className="w-6 h-6" />
                            </button>
                        </div>
                        
                        <div className="flex flex-col md:flex-row h-full overflow-hidden">
                            <div className="w-full md:w-5/12 p-6 overflow-y-auto border-r border-gray-100 bg-gray-50/50">
                                <h4 className="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                                    1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°
                                </h4>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏° *</label>
                                    <div className="relative">
                                        <div className="absolute left-3 top-2.5 text-gray-400"><Icon name="FileText" className="w-5 h-5"/></div>
                                        <input 
                                            value={topic}
                                            onChange={(e) => setTopic(e.target.value)}
                                            type="text" 
                                            className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white" 
                                            placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏£‡∏∏‡∏õ‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô..." 
                                        />
                                    </div>
                                </div>
                                
                                <div className="mb-6">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏° *</label>
                                    <div className="relative">
                                        <div className="absolute left-3 top-2.5 text-gray-400"><Icon name="CalendarDays" className="w-5 h-5"/></div>
                                        <input 
                                            value={meetingDate}
                                            onChange={(e) => setMeetingDate(e.target.value)}
                                            type="date" 
                                            className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white" 
                                        />
                                    </div>
                                </div>

                                <div className="h-px bg-gray-200 my-4"></div>

                                <h4 className="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                                    2. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö/‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                                </h4>
                                <div className="space-y-3">
                                    <div>
                                        <label className="text-xs font-medium text-gray-600">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö *</label>
                                        <input 
                                            name="assignee"
                                            value={currentItem.assignee}
                                            onChange={handleInputChange}
                                            type="text" 
                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 outline-none text-sm" 
                                            placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö" 
                                        />
                                    </div>
                                    <div className="grid grid-cols-2 gap-2">
                                        <div>
                                            <label className="text-xs font-medium text-gray-600">Part No.</label>
                                            <input 
                                                name="partNo"
                                                value={currentItem.partNo}
                                                onChange={handleInputChange}
                                                type="text" 
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 outline-none text-sm" 
                                                placeholder="P-001" 
                                            />
                                        </div>
                                        <div>
                                            <label className="text-xs font-medium text-gray-600">Part Name</label>
                                            <input 
                                                name="partName"
                                                value={currentItem.partName}
                                                onChange={handleInputChange}
                                                type="text" 
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 outline-none text-sm" 
                                                placeholder="Screw A" 
                                            />
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-2">
                                        <div>
                                            <label className="text-xs font-medium text-gray-600">‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° *</label>
                                            <input 
                                                name="startDate"
                                                value={currentItem.startDate}
                                                onChange={handleInputChange}
                                                type="date" 
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 outline-none text-sm" 
                                            />
                                        </div>
                                        <div>
                                            <label className="text-xs font-medium text-gray-600">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à *</label>
                                            <input 
                                                name="dueDate"
                                                value={currentItem.dueDate}
                                                onChange={handleInputChange}
                                                type="date" 
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 outline-none text-sm" 
                                            />
                                        </div>
                                    </div>
                                    <div>
                                        <label className="text-xs font-medium text-gray-600">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                                        <textarea 
                                            name="details"
                                            value={currentItem.details}
                                            onChange={handleInputChange}
                                            rows="2" 
                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 outline-none text-sm resize-none" 
                                            placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."
                                        ></textarea>
                                    </div>
                                    
                                    <button 
                                        onClick={handleAddItem}
                                        className="w-full py-2.5 bg-gray-900 hover:bg-black text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all mt-2"
                                    >
                                        <Icon name="ListPlus" className="w-4 h-4" /> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ
                                    </button>
                                </div>
                            </div>

                            <div className="w-full md:w-7/12 p-0 flex flex-col bg-white">
                                <div className="p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center">
                                    <h4 className="font-semibold text-gray-700">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ({pendingItems.length})</h4>
                                    <span className="text-xs text-gray-500">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
                                </div>
                                
                                <div className="flex-1 overflow-y-auto p-4 space-y-3">
                                    {pendingItems.length === 0 ? (
                                        <div className="h-full flex flex-col items-center justify-center text-gray-400 opacity-60">
                                            <Icon name="ListPlus" className="w-16 h-16 mb-2" />
                                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°</p>
                                            <p className="text-sm">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ"</p>
                                        </div>
                                    ) : (
                                        pendingItems.map((item, idx) => (
                                            <div key={item.tempId} className="flex gap-3 p-3 rounded-lg border border-gray-200 bg-white shadow-sm hover:border-blue-300 transition-all relative group">
                                                <div className="bg-blue-50 text-blue-600 font-bold w-8 h-8 rounded-full flex items-center justify-center text-xs flex-shrink-0">
                                                    {idx + 1}
                                                </div>
                                                <div className="flex-1 min-w-0">
                                                    <div className="flex items-center gap-2 mb-1">
                                                        <span className="font-semibold text-gray-900 truncate">{item.assignee}</span>
                                                        {(item.partNo || item.partName) && (
                                                            <span className="text-xs bg-gray-100 px-2 py-0.5 rounded-full text-gray-600 truncate">
                                                                {item.partNo} {item.partName}
                                                            </span>
                                                        )}
                                                    </div>
                                                    <div className="flex items-center gap-3 text-xs text-gray-500 mb-1">
                                                        <span className="flex items-center gap-1">
                                                            <Icon name="Calendar" className="w-3 h-3" /> 
                                                            {item.startDate} - {item.dueDate}
                                                        </span>
                                                    </div>
                                                    {item.details && <p className="text-xs text-gray-400 truncate">{item.details}</p>}
                                                </div>
                                                <button 
                                                    onClick={() => handleRemoveItem(item.tempId)}
                                                    className="p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors self-center"
                                                >
                                                    <Icon name="Trash2" className="w-4 h-4" />
                                                </button>
                                            </div>
                                        ))
                                    )}
                                </div>

                                <div className="p-4 border-t border-gray-200 bg-white flex justify-end gap-3 flex-shrink-0">
                                    <button onClick={onClose} className="px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                                    <button 
                                        onClick={handleSubmitAll}
                                        className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-md shadow-blue-200 transition-all flex items-center gap-2"
                                    >
                                        <Icon name="CheckCircle" className="w-4 h-4" /> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({pendingItems.length + (currentItem.assignee && currentItem.startDate ? 1 : 0)})
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App ---

        function App() {
            // Load from localStorage if available, else empty array
            const [tasks, setTasks] = useState(() => {
                const savedTasks = localStorage.getItem('meetingTasks');
                if (savedTasks) {
                    try {
                        return JSON.parse(savedTasks);
                    } catch (e) {
                        return [];
                    }
                }
                return [];
            });

            const [isModalOpen, setIsModalOpen] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterStatus, setFilterStatus] = useState('all');

            // Save to localStorage whenever tasks change
            useEffect(() => {
                localStorage.setItem('meetingTasks', JSON.stringify(tasks));
            }, [tasks]);

            const handleAddTasks = (newTasks) => {
                if (Array.isArray(newTasks)) {
                    setTasks(prev => [...newTasks, ...prev]);
                } else {
                    setTasks(prev => [newTasks, ...prev]);
                }
            };

            const handleDeleteTask = (id) => {
                if (window.confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                    setTasks(prev => prev.filter(t => t.id !== id));
                }
            };

            const handleToggleComplete = (id) => {
                setTasks(prev => prev.map(task => {
                    if (task.id === id) {
                        if (task.status === 'completed') {
                            if(window.confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                                return { ...task, status: 'active', completedAt: null };
                            }
                            return task;
                        } else {
                            return { ...task, status: 'completed', completedAt: new Date().toISOString() };
                        }
                    }
                    return task;
                }));
            };

            const stats = useMemo(() => {
                const now = new Date();
                now.setHours(0, 0, 0, 0);

                let normal = 0;
                let nearDue = 0;
                let overdue = 0;
                let completed = 0;

                tasks.forEach(task => {
                    if (task.status === 'completed') {
                        completed++;
                        return;
                    }

                    const due = new Date(task.dueDate);
                    due.setHours(0, 0, 0, 0);
                    
                    const diffTime = due - now;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                    if (diffDays < 0) {
                        overdue++;
                    } else if (diffDays <= 3) {
                        nearDue++;
                    } else {
                        normal++;
                    }
                });

                return {
                    all: tasks.length,
                    normal,
                    nearDue,
                    overdue,
                    completed
                };
            }, [tasks]);

            const getTaskStatusInfo = (task) => {
                if (task.status === 'completed') {
                    return { 
                        bg: 'bg-green-50', 
                        text: 'text-green-700', 
                        border: 'border-green-200', 
                        label: '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô',
                        desc: `‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ ${new Date(task.completedAt).toLocaleDateString('th-TH', { day: 'numeric', month: 'short' })}`
                    };
                }

                const now = new Date();
                now.setHours(0,0,0,0);
                const due = new Date(task.dueDate);
                const diffTime = due - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays < 0) {
                    return { 
                        bg: 'bg-red-50', 
                        text: 'text-red-700', 
                        border: 'border-red-200', 
                        label: '‡πÄ‡∏•‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î',
                        desc: `‡πÄ‡∏•‡∏¢‡∏°‡∏≤ ${Math.abs(diffDays)} ‡∏ß‡∏±‡∏ô`
                    };
                }
                if (diffDays === 0) {
                return { 
                        bg: 'bg-orange-50', 
                        text: 'text-orange-700', 
                        border: 'border-orange-200', 
                        label: '‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ',
                        desc: '‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ'
                    };
                }
                if (diffDays <= 3) {
                    return { 
                        bg: 'bg-yellow-50', 
                        text: 'text-yellow-700', 
                        border: 'border-yellow-200', 
                        label: '‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î',
                        desc: `‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${diffDays} ‡∏ß‡∏±‡∏ô`
                    };
                }
                return { 
                    bg: 'bg-blue-50', 
                    text: 'text-blue-700', 
                    border: 'border-blue-200', 
                    label: '‡∏õ‡∏Å‡∏ï‡∏¥',
                    desc: `‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${diffDays} ‡∏ß‡∏±‡∏ô`
                };
            };

            const formatDate = (dateString) => {
                if (!dateString) return '';
                return new Date(dateString).toLocaleDateString('th-TH', { 
                    day: 'numeric', 
                    month: 'short',
                    year: '2-digit'
                });
            };

            const filteredTasks = tasks.filter(task => {
                const matchesSearch = task.topic.toLowerCase().includes(searchTerm.toLowerCase()) || 
                                    task.assignee.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    (task.partNo && task.partNo.toLowerCase().includes(searchTerm.toLowerCase())) ||
                                    (task.partName && task.partName.toLowerCase().includes(searchTerm.toLowerCase())); 
                
                if (filterStatus === 'all') return matchesSearch;
                if (filterStatus === 'completed') return matchesSearch && task.status === 'completed';
                if (filterStatus === 'active') return matchesSearch && task.status !== 'completed';
                
                return matchesSearch;
            });

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-900 p-6 md:p-8">
                    {/* Header */}
                    <div className="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                        <div>
                            <h1 className="text-2xl font-bold text-gray-900">Meeting & Task Dashboard</h1>
                            <p className="text-gray-500 mt-1">‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ)</p>
                        </div>
                        <button 
                            onClick={() => setIsModalOpen(true)}
                            className="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-lg shadow-lg shadow-blue-200 flex items-center gap-2 font-medium transition-all active:scale-95"
                        >
                            <Icon name="Plus" className="w-5 h-5" />
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÉ‡∏´‡∏°‡πà
                        </button>
                    </div>

                    {/* Stats Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8">
                        <StatCard title="‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î" count={stats.all} type="default" />
                        <StatCard title="‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô" count={stats.completed} type="green" iconName="CheckCircle" />
                        <StatCard title="‡∏õ‡∏Å‡∏ï‡∏¥" count={stats.normal} type="blue" iconName="Clock" />
                        <StatCard title="‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î" count={stats.nearDue} type="yellow" iconName="AlertTriangle" />
                        <StatCard title="‡πÄ‡∏•‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î" count={stats.overdue} type="red" iconName="AlertCircle" />
                    </div>

                    {/* Filter Bar */}
                    <div className="bg-white p-2 rounded-xl border border-gray-200 shadow-sm mb-6 flex flex-col md:flex-row gap-3 items-center">
                        <div className="relative flex-1 w-full">
                            <div className="absolute left-3 top-2.5 text-gray-400"><Icon name="Search" className="w-5 h-5"/></div>
                            <input 
                                type="text" 
                                placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠, Part No/Name, ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö..." 
                                className="w-full pl-10 pr-4 py-2 rounded-lg border-none focus:ring-0 text-gray-700 placeholder-gray-400 outline-none"
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                            />
                        </div>
                        <div className="h-8 w-px bg-gray-200 hidden md:block"></div>
                        <div className="flex items-center gap-2 w-full md:w-auto px-2">
                            <div className="text-gray-400"><Icon name="Filter" className="w-5 h-5"/></div>
                            <select 
                                className="bg-transparent border-none text-gray-700 font-medium focus:ring-0 cursor-pointer w-full md:w-auto outline-none"
                                value={filterStatus}
                                onChange={(e) => setFilterStatus(e.target.value)}
                            >
                                <option value="all">üìÅ ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (All)</option>
                                <option value="active">‚ö° ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ (Active)</option>
                                <option value="completed">‚úÖ ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (Completed)</option>
                            </select>
                        </div>
                    </div>

                    {/* Content Area */}
                    <div className="bg-white rounded-2xl shadow-sm border border-gray-200 min-h-[400px] p-6 relative">
                        
                        {filteredTasks.length === 0 ? (
                            // Empty State
                            <div className="absolute inset-0 border-2 border-dashed border-gray-200 rounded-xl m-4 flex flex-col items-center justify-center text-gray-400">
                                <div className="bg-gray-50 p-4 rounded-full mb-4">
                                    <Icon name="Inbox" className="w-12 h-12 text-gray-300" />
                                </div>
                                <p className="text-lg font-medium text-gray-400">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô</p>
                                {searchTerm && <p className="text-sm mt-2">‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà</p>}
                            </div>
                        ) : (
                            // Task List
                            <div className="grid grid-cols-1 gap-4">
                                {filteredTasks.map((task) => {
                                    const statusInfo = getTaskStatusInfo(task);
                                    return (
                                        <div key={task.id} className={`group flex flex-col md:flex-row md:items-center justify-between p-4 rounded-xl border transition-all bg-white gap-4 ${task.status === 'completed' ? 'border-green-100 bg-green-50/30' : 'border-gray-100 hover:border-blue-200 hover:shadow-md'}`}>
                                            <div className="flex items-start gap-4 flex-1">
                                                {/* Checkbox / Status Icon */}
                                                <button 
                                                    onClick={() => handleToggleComplete(task.id)}
                                                    className={`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-all ${
                                                        task.status === 'completed' 
                                                        ? 'bg-green-500 text-white shadow-green-200 shadow-md' 
                                                        : 'bg-white border-2 border-gray-200 text-gray-300 hover:border-blue-400 hover:text-blue-400'
                                                    }`}
                                                    title={task.status === 'completed' ? '‡πÄ‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á' : '‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô'}
                                                >
                                                    <Icon name="Check" className="w-6 h-6" />
                                                </button>

                                                <div className={task.status === 'completed' ? 'opacity-60' : ''}>
                                                    <h3 className={`font-semibold text-lg ${task.status === 'completed' ? 'text-gray-500 line-through' : 'text-gray-900'}`}>
                                                        {task.topic}
                                                    </h3>
                                                    <div className="flex flex-wrap items-center gap-3 mt-1 text-sm text-gray-500">
                                                        <span className="flex items-center gap-1"><Icon name="User" className="w-3.5 h-3.5" /> {task.assignee}</span>
                                                        {(task.partNo || task.partName) && (
                                                            <span className="flex items-center gap-1">
                                                                <Icon name="Tag" className="w-3.5 h-3.5" /> 
                                                                {task.partNo} {task.partName && `(${task.partName})`}
                                                            </span>
                                                        )}
                                                        
                                                        {/* Meeting Date Display */}
                                                        {task.meetingDate && (
                                                            <span className="flex items-center gap-1 text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md" title="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°">
                                                                <Icon name="CalendarDays" className="w-3.5 h-3.5" /> 
                                                                {formatDate(task.meetingDate)}
                                                            </span>
                                                        )}

                                                        {/* Duration Display */}
                                                        <span className="flex items-center gap-1 text-gray-600 bg-gray-100 px-2 py-0.5 rounded-md" title="‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">
                                                            <Icon name="Clock" className="w-3.5 h-3.5" /> 
                                                            {formatDate(task.startDate)} - {formatDate(task.dueDate)}
                                                        </span>
                                                    </div>
                                                    {task.details && <p className="text-sm text-gray-400 mt-1 line-clamp-1">{task.details}</p>}
                                                </div>
                                            </div>
                                            
                                            <div className="flex items-center justify-between md:justify-end gap-4 w-full md:w-auto mt-2 md:mt-0 pt-2 md:pt-0 border-t md:border-t-0 border-gray-100">
                                                <div className="flex flex-col items-end">
                                                    <span className={`px-3 py-1 rounded-full text-xs font-medium border ${statusInfo.bg} ${statusInfo.text} ${statusInfo.border} flex items-center gap-1`}>
                                                        {task.status === 'completed' && <Icon name="CheckCircle" className="w-3 h-3" />}
                                                        {statusInfo.label}
                                                    </span>
                                                    {/* Running Date Indicator */}
                                                    <span className={`text-xs mt-1 font-medium ${task.status === 'completed' ? 'text-green-600' : 'text-gray-500'}`}>
                                                        {statusInfo.desc}
                                                    </span>
                                                </div>

                                                <button 
                                                    onClick={() => handleDeleteTask(task.id)}
                                                    className="text-gray-400 hover:text-red-500 p-2 rounded-lg hover:bg-red-50 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100"
                                                    title="‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"
                                                >
                                                    <Icon name="Trash2" className="w-5 h-5" />
                                                </button>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                    </div>

                    {/* Modal Component */}
                    <Modal 
                        isOpen={isModalOpen} 
                        onClose={() => setIsModalOpen(false)} 
                        onSubmit={handleAddTasks}
                    />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
